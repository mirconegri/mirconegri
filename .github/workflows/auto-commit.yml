name: Auto Commit

permissions:
  contents: write    # <--- fondamentale per permettere il push

on:
  schedule:
    - cron: '0 9 * * *' # ogni giorno alle 9:00 UTC
  workflow_dispatch:     # opzionale, ti permette di eseguirlo manualmente

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}   # <--- garantisce i permessi
      - name: Modifica file
        run: echo "$(date)" >> log.txt
      - name: Commit e push
        run: |
          git config user.name "MircoNegriBot"
          git config user.email "you@example.com"
          git add .
          git commit -m "Aggiornamento automatico del log $(date)" || echo "Nessuna modifica da committare"
          git push
